<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>xhr progress</title>
</head>

<body style="text-align: center;">
  <progress style="width: 300px; height: 30px;" id="progress" value="0" max="100"></progress><br>
  <div id="output"></div>

  <script type="text/javascript">
    // une fois que le DOM a chargÃ©
    const json =
        "https://ipfs.infura.io/ipfs/QmUncLe1PecbpRANzrg9XW9QGCPwkdipPs8ccrQxe7ud8v";
      document.addEventListener("DOMContentLoaded", () => {
        // instanciation de l'objet XHR
        const xhr = new XMLHttpRequest();
        let progress = document.querySelector('progress');
        let output = document.querySelector('#output');
        function reqListener() {
          console.log(JSON.parse(this.responseText));
        }
        //xhr.addEventListener("load", reqListener);
        xhr.addEventListener("error", console.warn);
        xhr.addEventListener("progress", (e) => {
          
          progress.value = `${((e.loaded / e.total) * 100)}`;
          output.innerHTML = `${~~((e.loaded / e.total) * 100)} %`
        });
        xhr.open(
          "GET",
          "https://ipfs.infura.io/ipfs/QmUncLe1PecbpRANzrg9XW9QGCPwkdipPs8ccrQxe7ud8v"
        );
        xhr.send();
      });
  </script>
</body>

</html>